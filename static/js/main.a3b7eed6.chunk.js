(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){e.exports=a(355)},355:function(e,t,a){"use strict";a.r(t);var n=a(50),r=a.n(n),c=a(67),i=a(0),l=a.n(i),o=a(26),u=a.n(o),s=a(144),m=a.n(s),d=a(38),p=a(145),f=a.n(p),b=a(74),h=a(72),v=a(66),E=a.n(v),g=a(158),y=a(55),O=a(146),x=a.n(O),j=a(148),w=a.n(j),k=a(149),S=a.n(k),N=function(e){var t=e.stepLabels,a=e.currentStep;return l.a.createElement(x.a,null,t.map(function(e,t){return l.a.createElement(w.a,{key:e,completed:t+1<a,active:t+1===a},l.a.createElement(S.a,null,e))}))},q={currentStep:1,allStepsData:{}},C=function(e,t){var a=t.type,n=t.payload;switch(a){case"next":var r=e.currentStep,c=e.allStepsData,i=c[r]||{},l={};if(Object(y.a)(i,n))l=c;else for(var o=1;o<r;o++)l[o]=c[o];return l[r]=n,{allStepsData:l,currentStep:r+1};case"back":return Object(g.a)({},e,{currentStep:e.currentStep-1});default:return e}},D=function(e){var t=e.children,a=e.fieldData,n=e.showFlow,r=Object(i.useReducer)(C,q),c=Object(d.a)(r,2),o=c[0],u=c[1],s=Object(i.useCallback)(function(e){return u({type:"next",payload:e})}),m=Object(i.useCallback)(function(){return u({type:"back"})}),p=Object(i.useCallback)(function(){return console.log(o)}),f=Object(i.useMemo)(function(){return t.map(function(e){return e.props.label})}),b=o.currentStep,h=o.allStepsData,v=t[b-1];return l.a.createElement(l.a.Fragment,null,n&&l.a.createElement(N,{currentStep:b,stepLabels:f}),Object(i.cloneElement)(v,{key:v.props.label,onNext:s,onBack:m,onSubmit:p,fieldData:a,allStepsData:h,currentStep:b}))},A=a(363),B=a(361),T=a(362),P=a(29),_=a(36),I=a.n(_),W=a(47),R=a.n(W),F=a(27),L=a.n(F),M=Object(h.a)({form:{width:"100%",height:"auto",display:"flex",flexDirection:"column"},fieldsArea:{display:"flex",flexDirection:"column"},field:{marginBottom:"20px!important"},compondField:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",marginBottom:20},helperText:{textAlign:"center!important"},addButton:{margin:"20px 0"},buttonsArea:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:30},gridContainer:{marginTop:"20px!important"}}),V=function(e){var t=e.onNext,a=e.fieldData,n=e.currentStep,r=e.allStepsData,c=M(),i=Object(A.a)("",[n,"meal"])(r),o=Object(A.a)(1,[n,"numberOfPeople"])(r),u=J(a);return l.a.createElement(P.c,{initialValues:{meal:i,numberOfPeople:o},onSubmit:t,validate:Q},function(e){var t=e.values,a=e.errors,n=e.handleChange;return l.a.createElement(P.b,{className:c.form},l.a.createElement("div",{className:c.fieldsArea},l.a.createElement(I.a,{className:c.field,id:"meal",name:"meal",label:"Meal",select:!0,value:t.meal,onChange:n,fullWidth:!0,error:!!a.meal,helperText:a.meal||" "},u.map(function(e){return l.a.createElement(R.a,{key:e,value:e},e)})),l.a.createElement(I.a,{className:c.field,id:"numberOfPeople",name:"numberOfPeople",label:"Number of people",type:"number",value:t.numberOfPeople,onChange:n,fullWidth:!0,error:!!a.numberOfPeople,helperText:a.numberOfPeople||" "})),l.a.createElement("div",{className:c.buttonsArea},l.a.createElement("div",null),l.a.createElement(L.a,{name:"next",type:"submit",variant:"contained",color:"primary"},"Next")))})},J=function(e){return e.reduce(function(e,t){return Object(B.a)(e,t.availableMeals)},[])},Q=function(e){var t={};return(e.numberOfPeople<1||e.numberOfPeople>10)&&(t.numberOfPeople="Value between 1 ~ 10"),Object(T.a)(e.numberOfPeople)&&(t.numberOfPeople="Required"),Object(T.a)(e.meal)&&(t.meal="Required"),t},U=a(354),z=a(359),H=a(360),G=function(e){var t=e.onNext,a=e.onBack,n=e.fieldData,r=e.currentStep,c=e.allStepsData,i=M(),o=Object(A.a)("",[r-1,"meal"])(c),u=Object(A.a)("",[r,"restaurant"])(c),s=K(o)(n);return l.a.createElement(P.c,{initialValues:{restaurant:u},onSubmit:t,validate:X},function(e){var t=e.values,n=e.errors,r=e.handleChange;return l.a.createElement(P.b,{className:i.form},l.a.createElement("div",{className:i.fieldsArea},l.a.createElement(I.a,{className:i.field,id:"restaurant",name:"restaurant",label:"Restaurant",select:!0,value:t.restaurant,onChange:r,fullWidth:!0,error:!!n.restaurant,helperText:n.restaurant||" "},s.map(function(e){return l.a.createElement(R.a,{key:e,value:e},e)}))),l.a.createElement("div",{className:i.buttonsArea},l.a.createElement(L.a,{name:"back",variant:"contained",onClick:a},"Back"),l.a.createElement(L.a,{name:"next",type:"submit",variant:"contained",color:"primary"},"Next")))})},K=function(e){return function(t){return t.filter(Object(U.a)(Object(z.a)(e),Object(H.a)("availableMeals"))).reduce(function(e,t){return Object(B.a)(e,[t.restaurant])},[])}},X=function(e){var t={};return Object(T.a)(e.restaurant)&&(t.restaurant="Required"),t},Y=a(155),Z=a.n(Y),$=a(153),ee=a.n($),te=a(156),ae=a.n(te),ne=a(154),re=a.n(ne),ce=a(94),ie=a.n(ce),le=function(e){var t=e.onNext,a=e.onBack,n=e.fieldData,r=e.currentStep,c=e.allStepsData,i=M(),o=Object(A.a)(1,[1,"numberOfPeople"])(c),u=Object(A.a)("",[r-1,"restaurant"])(c),s=Object(A.a)([{name:"",quantity:1}],[r,"dishes"])(c),m=oe(u)(n);return l.a.createElement(P.c,{initialValues:{dishes:s},onSubmit:t,validate:ue(o)},function(e){var t=e.values,n=e.errors,r=e.handleChange;return l.a.createElement(P.b,null,l.a.createElement(P.a,{className:i.fieldsArea,name:"dishes",validateOnChange:!0},function(e){var a=e.push,c=e.remove;return l.a.createElement("div",null,t.dishes.map(function(e,t){return l.a.createElement("div",{className:i.compondField,key:t},l.a.createElement(I.a,{id:"dishes[".concat(t,"].name"),name:"dishes[".concat(t,"].name"),label:"Dish",select:!0,fullWidth:!0,value:e.name,onChange:r,error:!!Object(A.a)(!1,["dishes[".concat(t,"].name")])(n),helperText:Object(A.a)(" ",["dishes[".concat(t,"].name")])(n)},m.map(function(e){return l.a.createElement(R.a,{key:e,value:e},e)})),l.a.createElement(I.a,{id:"dishes[".concat(t,"].quantity"),name:"dishes[".concat(t,"].quantity"),label:"Quantity",type:"number",fullWidth:!0,value:e.quantity,onChange:r,error:!!Object(A.a)(!1,["dishes[".concat(t,"].quantity")])(n),helperText:Object(A.a)(" ",["dishes[".concat(t,"].quantity")])(n)}),l.a.createElement(ee.a,{name:"remove-dish",onClick:function(){return c(t)}},l.a.createElement(re.a,{fontSize:"small"})))}),l.a.createElement(ie.a,{className:i.helperText,variant:"filled",error:!0},Object(A.a)("",["countAllQuantity"])(n)),l.a.createElement(Z.a,{className:i.addButton,name:"add-dish",color:"primary",onClick:function(){return a({name:"",quantity:1})}},l.a.createElement(ae.a,null)))}),l.a.createElement("div",{className:i.buttonsArea},l.a.createElement(L.a,{name:"back",variant:"contained",onClick:a},"Back"),l.a.createElement(L.a,{name:"next",type:"submit",variant:"contained",color:"primary"},"Next")))})},oe=function(e){return function(t){return t.filter(function(t){return t.restaurant===e}).reduce(function(e,t){return Object(B.a)(e,[t.name])},[])}},ue=function(e){return function(t){var a={};t.dishes.forEach(function(e,n){(e.quantity<1||e.quantity>10)&&(a["dishes[".concat(n,"].quantity")]="Value between 1 ~ 10"),Object(T.a)(e.quantity)&&(a["dishes[".concat(n,"].quantity")]="Required"),t.dishes.filter(function(t){return t.name===e.name}).length>1&&(a["dishes[".concat(n,"].name")]="Cannot same dishes"),Object(T.a)(e.name)&&(a["dishes[".concat(n,"].name")]="Required")});var n=t.dishes.reduce(function(e,t){return e+t.quantity},0);return e>n&&(a.countAllQuantity="The total number of dishes should be greater or equal to the number of person"),a}},se=a(31),me=a.n(se),de=a(30),pe=a.n(de),fe=function(e){var t=e.onBack,a=e.onSubmit,n=e.allStepsData,r=M(),c=Object(A.a)("",[1,"meal"])(n),i=Object(A.a)("",[1,"numberOfPeople"])(n),o=Object(A.a)("",[2,"restaurant"])(n),u=Object(A.a)([],[3,"dishes"])(n);return l.a.createElement("div",null,l.a.createElement(me.a,{className:r.gridContainer,spacing:24,container:!0},l.a.createElement(me.a,{item:!0,xs:5},l.a.createElement(pe.a,{variant:"h5",align:"right",gutterBottom:!0},"Meal")),l.a.createElement(me.a,{item:!0,xs:7},l.a.createElement(pe.a,{variant:"subtitle1",gutterBottom:!0},c)),l.a.createElement(me.a,{item:!0,xs:5},l.a.createElement(pe.a,{variant:"h5",align:"right",gutterBottom:!0},"Number of people")),l.a.createElement(me.a,{item:!0,xs:7},l.a.createElement(pe.a,{variant:"subtitle1",gutterBottom:!0},i)),l.a.createElement(me.a,{item:!0,xs:5},l.a.createElement(pe.a,{variant:"h5",align:"right",gutterBottom:!0},"Restaurant")),l.a.createElement(me.a,{item:!0,xs:7},l.a.createElement(pe.a,{variant:"subtitle1",gutterBottom:!0},o)),l.a.createElement(me.a,{item:!0,xs:5},l.a.createElement(pe.a,{variant:"h5",align:"right",gutterBottom:!0},"Dishes")),l.a.createElement(me.a,{item:!0,xs:7},l.a.createElement("div",null,u.map(function(e){return l.a.createElement(pe.a,{key:e.name,variant:"subtitle1",gutterBottom:!0},"".concat(e.name," - ").concat(e.quantity))})))),l.a.createElement("div",{className:r.buttonsArea},l.a.createElement(L.a,{name:"back",variant:"contained",onClick:t},"Back"),l.a.createElement(L.a,{name:"submit",variant:"contained",color:"secondary",onClick:a},"Submit")))},be=function(){var e=ve(),t=Object(i.useState)([]),a=Object(d.a)(t,2),n=a[0],o=a[1],u=function(){var e=Object(c.a)(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("data/dishes.json");case 2:t=e.sent,a=t.data,n=(void 0===a?{}:a).dishes,o(n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)(function(){u()},[]),l.a.createElement(b.MuiThemeProvider,{theme:he},l.a.createElement("div",{className:e.root},l.a.createElement(E.a,{className:e.formWrapper},l.a.createElement(D,{fieldData:n,showFlow:!0},l.a.createElement(V,{label:"Step 1"}),l.a.createElement(G,{label:"Step 2"}),l.a.createElement(le,{label:"Step 3"}),l.a.createElement(fe,{label:"Review"})))))},he=Object(b.createMuiTheme)({palette:{primary:{main:"#2196f3"}},typography:{useNextVariants:!0}}),ve=Object(h.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,width:"100vw",height:"auto",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},formWrapper:{width:"50%",height:"auto",padding:30}}),Ee=[{exact:!0,path:"/",component:be}],ge=a(157),ye="undefined"===typeof window;function Oe(){return(Oe=Object(c.a)(r.a.mark(function e(t){var a,n,c,i,o,u,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new URL(t.request.url),n=a.pathname,!(c=Ee.find(function(e){return Object(ge.a)(n,e)}))){e.next=13;break}if(!(i={component:c.component,location:{pathname:a.pathname,search:a.search},data:{}}).component.getInitialProps){e.next=9;break}return e.next=8,i.component.getInitialProps(i);case 8:i.data=e.sent;case 9:return o=m.a.renderToString(l.a.createElement(be,{location:i.location,data:i.data})),e.abrupt("return",new Response('<html>\n        <head>\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <meta charset="utf-8"/>\n          <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">\n        </head>\n        <body>\n          <div id="app">'.concat(o,'</div>\n          <script src="/worker.js"><\/script>\n          <script> window.__INITIAL_DATA__ = ').concat(JSON.stringify(i.data),"<\/script>\n        </body>\n      </html>"),{headers:{"Content-Type":"text/html"}}));case 13:return e.next=15,caches.open("react-everywhere");case 15:return u=e.sent,e.next=18,u.match(t.request);case 18:if(s=e.sent){e.next=24;break}return e.next=22,fetch(t.request);case 22:s=e.sent,t.waitUntil(u.put(t.request,s.clone()));case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.addEventListener("fetch",function(e){e.respondWith(function(e){return Oe.apply(this,arguments)}(e))}),ye||window.addEventListener("load",function(){var e=document.querySelector("#app");window.__INITIAL_DATA__?u.a.hydrate(l.a.createElement(be,window.__INITIAL_DATA__),e):u.a.render(l.a.createElement(be,null),e),"serviceWorker"in navigator&&navigator.serviceWorker.register("/worker.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)})})}},[[165,2,1]]]);
//# sourceMappingURL=main.a3b7eed6.chunk.js.map